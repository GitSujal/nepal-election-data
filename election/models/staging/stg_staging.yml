version: 2

models:
  - name: stg_current_fptp_candidates
    description: Staged current (2082 BS) first-past-the-post candidates with raw column names preserved
    columns:
      - name: CandidateID
        description: Unique identifier for the candidate
      - name: CandidateName
        description: Full name of the candidate (Devanagari)
      - name: AGE_YR
        description: Age of the candidate in years
      - name: Gender
        description: Gender of the candidate
      - name: PoliticalPartyName
        description: Name of the political party
      - name: SYMBOLCODE
        description: Election symbol code
      - name: SymbolName
        description: Name of the election symbol
      - name: CTZDIST
        description: Citizenship district of the candidate
      - name: DistrictName
        description: District where the candidate is contesting
      - name: StateName
        description: State/Province name
      - name: STATE_ID
        description: State/Province identifier
      - name: SCConstID
        description: Sub-constituency identifier
      - name: ConstName
        description: Constituency name
      - name: TotalVoteReceived
        description: Total votes received by the candidate
      - name: R
        description: Rank/position of the candidate in results
      - name: E_STATUS
        description: Election status code
      - name: DOB
        description: Date of birth
      - name: FATHER_NAME
        description: Father's name
      - name: SPOUCE_NAME
        description: Spouse's name
      - name: QUALIFICATION
        description: Educational qualification
      - name: NAMEOFINST
        description: Name of educational institution
      - name: EXPERIENCE
        description: Professional experience
      - name: OTHERDETAILS
        description: Other details about the candidate
      - name: ADDRESS
        description: Residential address

  - name: stg_current_proportional_candidates
    description: Staged current (2082 BS) proportional representation candidates from CSV source
    columns:
      - name: political_party_name
        description: Name of the political party (Devanagari)
      - name: serial_no
        description: Serial number of the candidate within the party list
      - name: full_name
        description: Full name of the candidate (Devanagari)
      - name: voter_id_number
        description: Voter ID number of the candidate
      - name: gender
        description: Gender of the candidate
      - name: inclusive_group
        description: Inclusive group category (e.g. आदिवासी जनजाति, मधेशी)
      - name: citizenship_district
        description: District of citizenship
      - name: backward_area
        description: Whether the candidate is from a backward area
      - name: disability
        description: Whether the candidate has a disability (✓ if yes)
      - name: associated_party
        description: Associated political party name when multiple parties combine under a single election symbol (सम्बन्धित राजनितिक दल)
      - name: remarks
        description: Additional remarks

  - name: stg_past_2079_fptp_election_result
    description: Staged 2079 BS first-past-the-post election results with raw column names preserved
    columns:
      - name: CandidateName
        description: Full name of the candidate (Devanagari)
      - name: Gender
        description: Gender of the candidate
      - name: Age
        description: Age of the candidate at the time of the 2079 election
      - name: PartyID
        description: Political party identifier
      - name: SymbolID
        description: Election symbol identifier
      - name: SymbolName
        description: Name of the election symbol
      - name: CandidateID
        description: Unique identifier for the candidate
      - name: StateName
        description: State/Province name
      - name: PoliticalPartyName
        description: Name of the political party
      - name: ElectionPost
        description: Election post the candidate contested for
      - name: DistrictCd
        description: District code
      - name: DistrictName
        description: District name
      - name: State
        description: State/Province identifier
      - name: SCConstID
        description: Sub-constituency identifier
      - name: CenterConstID
        description: Center constituency identifier
      - name: SerialNo
        description: Serial number
      - name: TotalVoteReceived
        description: Total votes received
      - name: CastedVote
        description: Total votes cast in the constituency
      - name: TotalVoters
        description: Total registered voters in the constituency
      - name: Rank
        description: Candidate's rank in results
      - name: Remarks
        description: Result remarks (e.g. 'Elected')
      - name: Samudaya
        description: Community/ethnic group
      - name: DOB
        description: Date of birth
      - name: CTZDIST
        description: Citizenship district
      - name: FATHER_NAME
        description: Father's name
      - name: SPOUCE_NAME
        description: Spouse's name
      - name: QUALIFICATION
        description: Educational qualification
      - name: EXPERIENCE
        description: Professional experience
      - name: OTHERDETAILS
        description: Other details
      - name: NAMEOFINST
        description: Name of educational institution
      - name: ADDRESS
        description: Residential address

  - name: stg_past_2079_proportional_election_result
    description: Staged 2079 BS proportional representation election results, flattened from nested JSON using CROSS JOIN UNNEST
    columns:
      - name: state_id
        description: State/Province identifier
      - name: state_name
        description: State/Province name (Devanagari)
      - name: district_id
        description: District identifier
      - name: district_name
        description: District name (Devanagari)
      - name: constituency_id
        description: Constituency identifier
      - name: constituency_name
        description: Constituency name (Devanagari)
      - name: serial_no
        description: Serial number of the party in the constituency
      - name: party_id
        description: Political party identifier
      - name: symbol_id
        description: Election symbol identifier
      - name: symbol_name
        description: Name of the election symbol
      - name: political_party_name
        description: Name of the political party
      - name: district_cd
        description: District code (from results record)
      - name: district_name_alt
        description: Alternative district name (from results record)
      - name: state_id_alt
        description: Alternative state identifier (from results record)
      - name: sc_const_id
        description: Sub-constituency identifier
      - name: center_const_id
        description: Center constituency identifier
      - name: order_id
        description: Display order identifier
      - name: total_vote_received
        description: Total votes received by the party in this constituency

  - name: stg_states
    description: Staged state/province reference data
    columns:
      - name: id
        description: State/Province identifier
      - name: name
        description: State/Province name (Devanagari)

  - name: stg_districts
    description: Staged district reference data
    columns:
      - name: id
        description: District identifier
      - name: name
        description: District name (Devanagari)
      - name: parentId
        description: Parent state/province identifier

  - name: stg_constituency
    description: Staged constituency reference data
    columns:
      - name: distId
        description: Parent district identifier
      - name: consts
        description: Constituency data nested under the district

  - name: stg_past_2074_fptp_election_result
    description: >
      Staged 2074 BS first-past-the-post election results with raw column names preserved.
      Simpler than 2079 results — no personal details (DOB, address, etc.) available.
    columns:
      - name: CandidateName
        description: Full name of the candidate (Devanagari)
      - name: Gender
        description: Gender of the candidate
      - name: Age
        description: Age of the candidate at the time of the 2074 election
      - name: PartyID
        description: Political party identifier
      - name: SymbolID
        description: Election symbol identifier
      - name: SymbolName
        description: Name of the election symbol
      - name: PoliticalPartyName
        description: Name of the political party
      - name: ElectionPost
        description: Election post the candidate contested for
      - name: DistrictName
        description: District name
      - name: State
        description: State/Province identifier
      - name: SCConstID
        description: Sub-constituency identifier
      - name: CenterConstID
        description: Center constituency identifier
      - name: SerialNo
        description: Serial number
      - name: TotalVoteReceived
        description: Total votes received
      - name: CastedVote
        description: Total votes cast in the constituency
      - name: TotalVoters
        description: Total registered voters in the constituency
      - name: Rank
        description: Candidate's rank in results
      - name: Remarks
        description: Result remarks (e.g. 'Elected')
      - name: Samudaya
        description: Community/ethnic group

  - name: stg_past_2074_proportional_election_result
    description: >
      Staged 2074 BS proportional representation election results.
      Party-level aggregate data only — no candidate names, districts, or
      constituency-level breakdown available. Each row is one party's total
      proportional vote count.
    columns:
      - name: PartyID
        description: Political party identifier
      - name: SymbolID
        description: Election symbol identifier
      - name: SymbolName
        description: Name of the election symbol
      - name: PoliticalPartyName
        description: Name of the political party
      - name: SerialNo
        description: Serial number / display order
      - name: TotalVoteReceived
        description: Total proportional votes received by the party nationwide
      - name: Rank
        description: Party's rank by vote count

  - name: stg_parliament_members
    description: >
      Staged House of Representatives members from Nepal Parliament API
      (hr.parliament.gov.np), covering 2074 and 2079 BS terms. Decodes
      gender (0=Male, 1=Female), converts election type (Direct→FPTP,
      Indirect→Proportional), and produces a name_normalized column using
      complex Devanagari normalization for cross-term matching.
    columns:
      - name: member_id
        description: Unique member identifier from the Parliament API
      - name: code
        description: Member code
      - name: slug
        description: URL slug for the member
      - name: parliament_type
        description: Parliament type (House of Representatives)
      - name: member_type
        description: Member type identifier
      - name: status
        description: Membership status
      - name: gender
        description: Decoded gender — Male, Female, or Other (raw values 0, 1 decoded)
      - name: dob
        description: Date of birth
      - name: registered_date_bs
        description: Registration date in Bikram Sambat (2074 or 2079) — used as the term identifier
      - name: tenure_end_date
        description: End date of the parliamentary tenure
      - name: election_area_no
        description: Election area / constituency number
      - name: territory_no
        description: Territory number
      - name: name_np
        description: Full name in Nepali (Devanagari)
      - name: name_en
        description: Full name in English
      - name: designation_np
        description: Designation in Nepali
      - name: designation_en
        description: Designation in English
      - name: description_np
        description: Description in Nepali
      - name: description_en
        description: Description in English
      - name: district_id
        description: District identifier
      - name: district_code
        description: District code
      - name: district_name_np
        description: District name in Nepali
      - name: district_name_en
        description: District name in English
      - name: political_party_id
        description: Political party identifier
      - name: political_party_name_np
        description: Political party name in Nepali
      - name: political_party_name_en
        description: Political party name in English
      - name: election_type_id
        description: Election type identifier
      - name: election_type_np
        description: Election type in Nepali
      - name: election_type
        description: >
          Normalized election type — 'FPTP' (was 'Direct') or
          'Proportional' (was 'Indirect')
      - name: name_normalized
        description: >
          Normalized Devanagari name for cross-term matching. Strips
          ZWJ/ZWNJ characters, whitespace, dots, parentheses, titles
          (डा, डा०, कु, श्री), normalizes long→short vowels (ी→ि, ू→ु),
          anusvara (ँ→ं), conjuncts (ङ्ग→ङ, ट्ट→ट, ण्ड→ंड), and
          handles व↔ब spelling variations.

  - name: stg_political_party_symbols
    description: >
      Staged political party information scraped from Wikipedia. Contains
      party symbols, leader names, and founding years for matching against
      election data.
    columns:
      - name: party_name_en
        description: Party name in English
      - name: party_name_np
        description: Party name in Nepali (Devanagari)
      - name: party_url
        description: Wikipedia URL for the party
      - name: symbol_url
        description: URL to the party's election symbol image
      - name: symbol_alt
        description: Alt text for the party symbol image
      - name: leader
        description: Current party leader name
      - name: founded_year
        description: Year the party was founded

  - name: stg_candidates_political_history
    description: >
      Staged detailed political history and profiles of FPTP candidates.
      Includes comprehensive election participation history across multiple
      elections, political events timeline, ministerial appointments count,
      and overall approval ratings. Used to enrich candidate profiles with
      historical context beyond just 2074 and 2079 elections.
    columns:
      - name: candidate_id
        description: Unique identifier for the candidate (matches CandidateID in FPTP tables)
      - name: candidate_name
        description: Full name of the candidate (Devanagari)
      - name: candidate_party
        description: Current political party of the candidate
      - name: candidates_current_position
        description: Current political position (e.g., पूर्व मन्त्री, पूर्व सांसद)
      - name: candidates_current_position_in_party
        description: Current position within the political party
      - name: candidate_picture
        description: URL to candidate's profile picture
      - name: election_history
        description: >
          Array of election participation records across multiple years
          (2048 to current), including year, position contested, district,
          constituency, result (विजयी/पराजित), and party affiliation
      - name: political_history
        description: >
          Array of significant political events including ministerial
          appointments (MINISTERIAL_APPT), election wins/losses, party
          switches, controversies, and major achievements with dates,
          details, source links, and event categorization
      - name: analysis
        description: >
          Detailed political analysis and profile of the candidate covering
          their political career, strengths, controversies, and public perception
      - name: overall_approval_rating
        description: Aggregated approval rating score (0-100)
      - name: minister_appointment_count
        description: >
          Total number of times the candidate has been appointed as a
          minister (including मन्त्री, उपप्रधानमन्त्री, राज्यमन्त्री positions)
          extracted from political_history events with MINISTERIAL_APPT type
      - name: total_elections_from_profile
        description: >
          Total count of all elections the candidate has participated in
          across their entire career, extracted from election_history array
      - name: total_wins_from_profile
        description: >
          Total count of elections the candidate has won (result = विजयी
          or Elected) across their entire career
      - name: is_past_minister
        description: >
          Boolean flag indicating if the candidate has ever been appointed
          as a minister (true if minister_appointment_count > 0)
